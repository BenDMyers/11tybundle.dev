---js
{
  eleventyComputed: {
    title: "Posts in '{{ category }}'",
    description: "Posts in the 11ty Bundle with the category: '{{ category }}'",
  },
  permalink: "/categories/{{ category | slugify }}/",
  keywords: "categories, 11ty Bundle, 11ty, eleventy, blog posts",
  eleventyExcludeFromCollections: "true",
  pagination:  {
    data: "getpostcategories",
    size: 1,
    alias: "category",
    before: function(data) {
      let categorySet = new Set();
      for (let item of data) {
      (item.Categories || []).forEach((category) => categorySet.add(category));
    }
    return Array.from(categorySet).sort((a, b) => {
      return a > b ? 1 : -1;
    });
    }
  },
  image: {
    source: "11ty-bundle-dev.jpg",
    alt: "an address plate for house number 11"
  }
}
---

<h2>Posts in category “{{ category }}”</h2>

{% for item in airtableitems | postsInCategory(category) %}
<div class="bundleitem">
<p class="bundleitem-title"><a href="{{ item.Link }}" target="_blank">{{ item.Title }}</a></p>
<p class="bundleitem-description">{{ item.Link | getDescription | truncate(100) }}</p>
<p class="bundleitem-dateline">{% if item.AuthorLink %}<a href="/authors/{{ item.Author | slugify }}/">{{ item.Author }}</a> &middot; {% endif %}{% if item.Date %}{{ item.Date | formatItemDate }}{% endif %}</p>
{# <p class="bundleitem-dateline">{% if item.AuthorLink %}<a href="{{ item.AuthorLink }}" target="_blank">{{ item.Author }}</a>{% endif %}{% if item.Date %} &middot; {{ item.Date | formatItemDate }}{% endif %}</p> #}
<p class="bundleitem-categories">{% if item.Categories %}Categories: {% for item in airtableitems | getItemCategories(item.Link) | sort %}{% for category in item.Categories | sort %}<a href="/categories/{{category | slugify }}/">{{ category }}</a>&nbsp;&nbsp;{% endfor %}{% endfor %}{% endif %}</p>
</div>
{% endfor %}
